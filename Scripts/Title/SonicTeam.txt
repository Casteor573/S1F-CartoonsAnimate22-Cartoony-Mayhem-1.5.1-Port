// ----------------------------------
// RSDK Project: Sonic 1/Sonic 2
// Script Description: Sonic Team Object
// Script Author: Christian Whitehead/Simon Thomley
// Unpacked by Rubberduckycooly's script unpacker
// ----------------------------------


reserve function SkipScreen

//-------Aliases-------//
private alias 2 : TYPE_SONICTEAM


event ObjectMain	
	switch object.state
	case 0
		object.value0 = 50
		object.value1 = screen.xsize
		object.value2 = screen.xsize
		object.value2 += screen.xcenter
		PlayMusic(1)	
		object.state++
		CallFunction(SkipScreen)
		break
	case 1
		object.value0--
		if object.value0 == 0
			object.state++
		end if
		CallFunction(SkipScreen)
		break
	case 2
		if object.value3 < 256
			object.value3 += 24
		else
			object.state++
		end if
		CallFunction(SkipScreen)
		break
	case 3
		if object.value3 > 0
			object.value3 -= 24
		else
			object.state++
		end if
		CallFunction(SkipScreen)		
		break
	case 4
		object.value0++

		if object.value1 <= 15
			temp0 = object.value1
			temp0 >>= 3
			temp0++
			object.value1 -= temp0
			
			temp0 = object.value2
			temp0 /= 10
			temp0 += 2
			temp0++
			object.value2 -= temp0	
		else
			object.value1 -= 6
		end if
		
		if object.value0 >= 510
			object.value0 = 0
			object.state++
		end if
		CallFunction(SkipScreen)
		break
	case 5
		if object.value0 < 600
			object.value0 += 8
		else
			StopMusic()
			object.value0 = 0

			ResetObjectEntity(object.entityPos, TypeName[Logo], 0, 0, 0)
		end if
		SetClassicFade(0, 0, 0, object.value0)
		break
	end switch
end event

function SkipScreen	
	CheckTouchRect(0, 0, screen.xsize, screen.ysize)
	if checkResult > -1
		inputPress.start = 1
	end if
	if inputPress.start == 1
		object.state = 5
	end if
end function


event ObjectDraw
	DrawRect(0, 0, screen.xsize, screen.ysize, color1, 0, color1, 255)

	temp0 = object.value2
	temp0 += screen.xcenter

	temp1 = object.value2
	temp1 += screen.ysize
	temp1 += 30
	
	DrawSpriteScreenXY(0, temp0, temp1)
	
	temp0 = object.value1
	FlipSign(temp0)
	temp0 += screen.xcenter
	
	DrawSpriteScreenXY(1, temp0, screen.ycenter)

	if object.state <= 1
		DrawRect(0, 0, screen.xsize, screen.ysize, 0, 0, 0, 255)
	end if	
	DrawRect(0, 0, screen.xsize, screen.ysize, 0, 0, color5, object.value3)		
end event


event ObjectStartup
	LoadSpriteSheet("Title/SonicTeamUSA.gif")
	SpriteFrame(-140, -199, 387, 199, 212, 237) // BG 
	SpriteFrame(-164, 0, 327, 29, 1, 513) // Logo

	SetMusicTrack("CA22Intro.ogg", 1, 0)	
end event

event RSDKDraw
	DrawSprite(0)
end event

event RSDKLoad
	LoadSpriteSheet("Global/Display.gif")
	SpriteFrame(-16, -16, 32, 32, 1, 143)
end event
